<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<ui:composition>
    <f:view>
        <h:head>
            <title>Create Ride</title>
            <style>
                body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    min-height: 100vh;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    padding: 20px;
                }
                
                .form-container {
                    width: 450px;
                    background: white;
                    padding: 40px;
                    border-radius: 15px;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                }
                
                .title {
                    text-align: center;
                    color: #2c3e50;
                    margin-bottom: 30px;
                    font-size: 28px;
                    font-weight: bold;
                }
                
                .form-group {
                    margin-bottom: 25px;
                }
                
                .label {
                    display: block;
                    color: #34495e;
                    margin-bottom: 8px;
                    font-weight: 600;
                    font-size: 14px;
                }
                
                .input-field {
                    width: 100%;
                    padding: 12px 15px;
                    border: 2px solid #e0e0e0;
                    border-radius: 8px;
                    font-size: 14px;
                    transition: all 0.3s;
                }
                
                .input-field:focus {
                    border-color: #3498db;
                    outline: none;
                    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
                }
                
                .error-message {
                    color: #e74c3c;
                    font-size: 12px;
                    margin-top: 5px;
                    display: block;
                }
                
                .create-button {
                    width: 100%;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    border: none;
                    padding: 15px;
                    border-radius: 8px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: all 0.3s;
                    margin-top: 10px;
                }
                
                .create-button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
                }
                
                .success-box {
                    background: #d4edda;
                    color: #155724;
                    padding: 15px;
                    border-radius: 8px;
                    margin-top: 25px;
                    border-left: 5px solid #28a745;
                    font-size: 14px;
                }
                
                .link-container {
                    text-align: center;
                    margin-top: 30px;
                    padding-top: 20px;
                    border-top: 1px solid #eee;
                }
                
                .nav-link {
                    color: #3498db;
                    text-decoration: none;
                    font-weight: bold;
                    font-size: 16px;
                    transition: all 0.3s;
                }
                
                .nav-link:hover {
                    color: #2980b9;
                    text-decoration: underline;
                }
                
                .ui-calendar {
                    width: 100%;
                }
                
                .calendar-button {
                    background: #3498db;
                    color: white;
                    border: none;
                    padding: 10px 15px;
                    border-radius: 5px;
                    cursor: pointer;
                }
            </style>
        </h:head>

        <h:body>
            <div class="form-container">
                <h2 class="title">âž• Create New Ride</h2>

                <h:form id="createForm">
                    <!-- Depart City -->
                    <div class="form-group">
                        <span class="label">Depart City:</span>
                        <h:inputText id="departCity" 
                                    value="#{createRideBean.origin}"
                                    styleClass="input-field"
                                    required="true"
                                    requiredMessage="Depart city is required">
                            <f:validateRegex pattern="^[a-zA-ZÃ±Ã‘Ã§Ã‡Ã¡Ã©Ã­Ã³ÃºÃÃ‰ÃÃ“Ãš\s]+$"
                                          message="Only letters and spaces allowed"/>
                        </h:inputText>
                        <h:message for="departCity" styleClass="error-message"/>
                    </div>

                    <!-- Arrival City -->
                    <div class="form-group">
                        <span class="label">Arrival City:</span>
                        <h:inputText id="arrivalCity" 
                                    value="#{createRideBean.destination}"
                                    styleClass="input-field"
                                    required="true"
                                    requiredMessage="Arrival city is required">
                            <f:validateRegex pattern="^[a-zA-ZÃ±Ã‘Ã§Ã‡Ã¡Ã©Ã­Ã³ÃºÃÃ‰ÃÃ“Ãš\s]+$"
                                          message="Only letters and spaces allowed"/>
                        </h:inputText>
                        <h:message for="arrivalCity" styleClass="error-message"/>
                    </div>

                    <!-- Seats -->
                    <div class="form-group">
                        <span class="label">Number of Seats:</span>
                        <h:inputText id="seats" 
                                    value="#{createRideBean.seats}"
                                    styleClass="input-field"
                                    required="true"
                                    requiredMessage="Number of seats is required">
                            <f:validateLongRange minimum="1" maximum="500"
                                              message="Must be between 1 and 500"/>
                        </h:inputText>
                        <h:message for="seats" styleClass="error-message"/>
                    </div>

                    <!-- Price -->
                    <div class="form-group">
                        <span class="label">Price (â‚¬):</span>
                        <h:inputText id="price" 
                                    value="#{createRideBean.price}"
                                    styleClass="input-field"
                                    required="true"
                                    requiredMessage="Price is required">
                            <f:validateLongRange minimum="1" maximum="500"
                                              message="Must be between 1 and 500"/>
                        </h:inputText>
                        <h:message for="price" styleClass="error-message"/>
                    </div>

                    <!-- Date -->
                    <div class="form-group">
                        <span class="label">Date:</span>
                        <p:calendar id="date" 
                                  value="#{createRideBean.date}"
                                  navigator="true" 
                                  mode="popup"
                                  pattern="yyyy-MM-dd"
                                  showButtonPanel="true"
                                  style="width: 100%;"/>
                    </div>

                    <!-- Driver Email (oculto o fijo) -->
                    <h:inputHidden id="driverEmail" value="#{createRideBean.driverEmail}"/>

                    <!-- Submit Button -->
                    <div class="form-group">
                        <h:commandButton value="Create Ride"
                                       action="#{createRideBean.createRide}"
                                       styleClass="create-button"/>
                    </div>

                    <!-- Success Message -->
                    <h:panelGroup rendered="#{not empty createRideBean.datua}">
                        <div class="success-box">
                            <h3 style="margin-top: 0;">âœ… Ride Created Successfully!</h3>
                            <p>#{createRideBean.datua}</p>
                        </div>
                    </h:panelGroup>

                    <!-- Messages -->
                    <h:messages id="messages" 
                              globalOnly="true"
                              infoClass="success-message"
                              errorClass="error-message"
                              style="margin-top: 20px;"/>
                </h:form>

                <!-- Navigation Link -->
                <div class="link-container">
                    <h4>Looking for existing rides?</h4>
                    <h:link value="ðŸ” Query Rides" outcome="QueryRides"
                           styleClass="nav-link"/>
                </div>
            </div>
        </h:body>
    </f:view>
</ui:composition>
</html>